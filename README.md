# tpl-gulpfile


## Description
gulpfileのテンプレートです。  
今まで、pugとphpを分けて管理し、その後各テンプレートに入れこむやり方をしていましたが、  
pugとphpのgulpfileを一緒にして管理することにしました。  

### 圧縮について
2021年9月ごろまでは、全てのファイルを圧縮しSassやタスクランナーを使用していない会社に対しては圧縮していないファイルも生成するというやり方をしていました。  
しかし、タスクランナーを使用していない会社では、修正の際にCSSを修正し圧縮するサービス等で圧縮しコピペ、、  
という作業がかなり手間でヒューマンエラーが生じやすいです。  
そもそも、ページ固有のCSSなどは記述量も少なく、圧縮する必要はないように感じます。

2021年9月以降は以下の方法に変更します。
- Sassやタスクランナーを使用している会社へは、今まで通り全てのアセットを圧縮した状態で納品
- Sassやタスクランナーを使用していない会社へは、common.scss,module.jsなどの膨大なファイルのみ圧縮し、それ以外のCSS、JavaScriptは圧縮しない状態で納品する。


gulpfile.jsやtpl-projectのデフォルトでは、全て圧縮する方法になっています。  
圧縮しないパターンでは、コメントアウトを外して圧縮しない仕様にして利用してください。

v2.10.0kらは、14行目の「type」変数をminかnormalかにするだけで、CSS,JavaScriptの圧縮を変更できるようになりました。



## node
v14.14.0


## gulp
v4.0.2

<br>

## Command

### init
```
npm i
```

### dafault
```
gulp
```

### watch
```
gulp watch
```

<br>

## タスク

全てのタスクは、開発ディレクトリから本番ディレクトリに対して行います。  

### pugTask
`**/*.pug`から`**/*.php`へにコンパイルします。

### sassTask
`**/*.scss`から`**/*.min.css`へコンパイルします。  
ベンダープレフィックスを自動で付与します。  
※圧縮しないバージョンもコメントアウトで入っています。

### imgTask
jpg,png,gif,svgファイルを圧縮します。  
jpg,png,gifに関しては、webpにも圧縮・変換します。  
  
ただし、以下のファイルはコンパイルしません。
+ metaディレクトリのファイル
+ 「_」「#」「apng」から始まっているファイル

### spriteTask
スプライト用のsvgファイル「sprite.svg」を生成します。  
spriteディレクトリのファイルが自動で結合します。  
開発ディレクトリを使わない会社用に、本番ディレクトリにもpartsディレクトリで圧縮した個別のsvgファイルを追加します。

### jsTask
`**/*.js`から`**/*.min.js`にコンパイルします。  

以下のディレクトリでは、「ディレクトリ名.js」等で出力します。
+ library（圧縮しません）
+ module（圧縮します）

※圧縮しないバージョンもコメントアウトで入っています。

### devMove
上記以外のファイルを開発ディレクトリから本番ディレクトリへ移動します。
+ mp4
+ mp3
+ mov
+ m4a
+ txt
+ pdf
+ ttf
+ eot
+ woff
+ woff2
+ ico
+ webp
+ apng*.+(png)
+ *.css

### watchTTask

### default


※詳細を確認したい場合は、gulpfile.jsの中身を見てください。
